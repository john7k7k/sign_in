"use strict";(self["webpackChunkwebpage1"]=self["webpackChunkwebpage1"]||[]).push([[382],{9382:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var a=n(3396);function o(e,t,n,o,i,l){const s=(0,a.up)("Speech");return(0,a.wg)(),(0,a.j4)(s)}var i=n(7139),l=n(9242);const s=(0,a._)("label",{for:"dropdown"},"選擇控制魚的ID:",-1),r=["value"],c=(0,a._)("label",{for:"languageSelect"},"選擇語言:",-1),u=(0,a._)("option",{value:"en-US"},"英文",-1),h=(0,a._)("option",{value:"zh-CN"},"中文",-1),g=[u,h],d=(0,a._)("br",null,null,-1);function p(e,t,n,o,u,h){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",null,[s,(0,a.wy)((0,a._)("select",{id:"dropdown","onUpdate:modelValue":t[0]||(t[0]=e=>u.selectedfishUID=e),onChange:t[1]||(t[1]=(...e)=>h.handleChange&&h.handleChange(...e))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.options,((e,t)=>((0,a.wg)(),(0,a.iD)("option",{key:t,value:e.value},(0,i.zw)(e.label),9,r)))),128))],544),[[l.bM,u.selectedfishUID]])]),c,(0,a.wy)((0,a._)("select",{id:"languageSelect","onUpdate:modelValue":t[2]||(t[2]=e=>u.selectedLanguage=e),onChange:t[3]||(t[3]=(...e)=>h.changeLanguage&&h.changeLanguage(...e))},g,544),[[l.bM,u.selectedLanguage]]),d,(0,a._)("button",{onClick:t[4]||(t[4]=(...e)=>h.startSpeechRecognition&&h.startSpeechRecognition(...e))},"開始辨識"),(0,a._)("p",null,(0,i.zw)("辨識結果: "+u.recognitionResult),1),(0,a._)("button",{onClick:t[5]||(t[5]=(...e)=>h.submit&&h.submit(...e))},"提交結果")])}var v=n(4161),f={data(){return{selectedfishUID:null,options:[{value:"option1",label:"選項 1"},{value:"option2",label:"選項 2"},{value:"option3",label:"選項 3"}],recognition:null,selectedLanguage:"en-US",recognitionResult:""}},mounted(){this.fetchOptions(),this.recognition=new window.webkitSpeechRecognition,this.recognition.lang=this.selectedLanguage,this.recognition.onresult=e=>{this.recognitionResult=e.results[0][0].transcript}},methods:{startSpeechRecognition(){this.recognition.start(),this.recognitionResult="辨識中"},changeLanguage(){this.recognition.lang=this.selectedLanguage},submit(){v.Z.post("/api/v1/fish/voice",{text:this.recognitionResult,fishUID:this.selectedfishUID},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})},handleChange(){this.$emit("change",this.selectedOption)},async fetchOptions(){this.options=Object.keys(this.flatten((await v.Z.get("/api/v1/account",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.fishesID)).map((e=>({value:e.slice(-7),label:e.slice(-4)}))),console.log(this.options)},traverseAndFlatten(e,t,n){for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o;o=void 0===n?a:n+"."+a;var i=e[a];"object"===typeof i?this.traverseAndFlatten(i,t,o):t[o]=i}},flatten(e){var t={};return this.traverseAndFlatten(e,t),t}}},b=n(89);const w=(0,b.Z)(f,[["render",p]]);var m=w,D={name:"speech",components:{Speech:m},data(){return{fishUID:""}},methods:{update(e){this.fishUID=e}}};const S=(0,b.Z)(D,[["render",o]]);var k=S}}]);
//# sourceMappingURL=382.bda1cb32.js.map