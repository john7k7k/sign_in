"use strict";(self["webpackChunkwebpage1"]=self["webpackChunkwebpage1"]||[]).push([[740],{5986:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var o=a(3396),l=a(6824),n=a(8521);const s={class:"login"};function i(e,t,a,i,r,d){const c=(0,o.up)("loginnavbar"),m=(0,o.up)("logininput");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(c,{class:"loginnavbar-bg"}),(0,o.Wm)(l.o,{class:""},{default:(0,o.w5)((()=>[(0,o.Wm)(n.D,{class:"d-flex justify-center",xs:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"logininput"})])),_:1})])),_:1})])}var r=a(4725),d=a(9242),c=a(870),m=a(11),u=a(6422),g=a(3369),p=a(3444),w=a(2900);const b=e=>((0,o.dD)("data-v-0005f8bb"),e=e(),(0,o.Cn)(),e),h=b((()=>(0,o._)("div",{class:"sign-up-text"},"註冊",-1))),S=b((()=>(0,o._)("div",{class:"titleword mb-5 ml-2 text-white"},"使用者登入",-1))),f=b((()=>(0,o._)("div",{class:"ml-2 mb-1 text-blue-grey-lighten-5 textdistance"},"使用者ID",-1))),v={class:"text-blue-grey-lighten-5 d-flex align-center justify-space-between ml-2 mb-1 textdistance"},y=b((()=>(0,o._)("br",null,null,-1)));function I(e,t,a,l,n,s){return(0,o.wg)(),(0,o.j4)(g.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m._,{class:"pa-3 cardbg","max-width":"400"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.O,{modelValue:e.form,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form=t),onSubmit:(0,d.iM)(s.onSubmit,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(c.T,{variant:"text",route:"",to:"/sign/up",class:"mt-2 d-flex justify-end",color:"indigo-accent-4"},{default:(0,o.w5)((()=>[h])),_:1}),S,f,(0,o.Wm)(w.h,{density:"compact",modelValue:e.account,"onUpdate:modelValue":t[0]||(t[0]=t=>e.account=t),readonly:e.loading,rules:[s.required],class:"mb-3 mr-2 ml-2 textfield text-white",placeholder:"","bg-color":"rgba(255, 255, 255, 0.15)"},null,8,["modelValue","readonly","rules"]),(0,o._)("div",v,[(0,o.Uk)("密碼 "),(0,o.kq)("",!0)]),(0,o.Wm)(w.h,{dark:"","append-inner-icon":e.visible?"mdi-eye-off":"mdi-eye",type:e.visible?"text":"password",modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),readonly:e.loading,rules:[s.required],density:"compact",placeholder:"",class:"ml-2 mr-2 text-white","onClick:appendInner":t[2]||(t[2]=t=>e.visible=!e.visible),"bg-color":"rgba(255, 255, 255, 0.15)"},null,8,["append-inner-icon","type","modelValue","readonly","rules"]),y,(0,o.Wm)(p.v,{timeout:1e3,rounded:"pill"},{activator:(0,o.w5)((({props:t})=>[(0,o.Wm)(c.T,(0,o.dG)({loading:e.loading,type:"submit",variant:"elevated",class:"mb-12 loginbuttom"},t,{width:"150"}),null,16,["loading"])])),_:1})])),_:1},8,["modelValue","onSubmit"])])),_:1})])),_:1})}var k=a(4161);const _=a(8082);var x={data:()=>({form:!1,salt:"kowkoww151s5ww",account:null,password:null,token:"",visible:!1,loading:!1,IP:"20.89.131.34:443",usertoken:localStorage.getItem("token")}),async created(){await this.loadnewdata()},methods:{onSubmit(){const e=this.password+this.salt,t=_.MD5(e).toString();this.form&&(this.loading=!0,localStorage.setItem("username",this.account),k.Z.post("https://pre.aifish.cc/api/v1/account/login",{username:this.account,password:t}).then((e=>{if(console.log(e),this.loading=!1,200==e.status){localStorage.setItem("UserName",e.data.username),localStorage.setItem("UserEmail",e.data.email),localStorage.setItem("UserLevel",e.data.level),localStorage.setItem("UserSection",e.data.section);const t=e.data.registrationTime,a=new Date(1e3*t),o=a.getFullYear(),l=(a.getMonth()+1).toString().padStart(2,"0"),n=a.getDate().toString().padStart(2,"0"),s=a.getHours().toString().padStart(2,"0"),i=a.getMinutes().toString().padStart(2,"0"),r=a.getSeconds().toString().padStart(2,"0"),d=`${o}-${l}-${n} ${s}:${i}:${r}`;localStorage.setItem("registrationTime",d),localStorage.setItem("token",e.data.token),document.cookie="token="+e.data.token+"; path=/";const c=e.data.poolTable,m=c.map((e=>e.id)),u=c.map((e=>e.name)),g=e.data.instructionTable,p=g.map((e=>e.id)),w=g.map((e=>e.name)),b=e.data.departTable,h=b.map((e=>e.id)),S=b.map((e=>e.name));localStorage.setItem("PoolsCode",JSON.stringify(m)),localStorage.setItem("PoolsName",JSON.stringify(u)),localStorage.setItem("InstructionCode",JSON.stringify(p)),localStorage.setItem("InstructionName",JSON.stringify(w)),localStorage.setItem("DepartCode",JSON.stringify(h)),localStorage.setItem("DepartName",JSON.stringify(S)),localStorage.setItem("UserImage","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ1f4J_Qn_tU9gsrwEcIxIdFzgGYVt_mbCjDg&usqp=CAU"),"001"==e.data.section&&e.data.level<=10?window.innerWidth<=600?window.location.replace("/home"):window.location.replace("/select/instruction"):window.location.replace("/home")}else this.$Message.error("登入失敗")})).catch((e=>{console.log(e),this.loading=!1,this.$Message.error("登入失敗")})))},required(e){return!!e||"此區為必填區域"},async loadnewdata(){try{const e=await k.Z.get("/api/v1/account",{headers:{Authorization:`Bearer ${this.usertoken}`}});console.log(e),200===e.status&&window.location.replace("/home")}catch(e){}}}},W=a(89);const N=(0,W.Z)(x,[["render",I],["__scopeId","data-v-0005f8bb"]]);var U=N,D={name:"login",components:{logininput:U,loginnavbar:r.Z},data:()=>({})};const V=(0,W.Z)(D,[["render",i]]);var C=V}}]);
//# sourceMappingURL=740.ebc9bfd8.js.map