"use strict";(self["webpackChunkwebpage1"]=self["webpackChunkwebpage1"]||[]).push([[441],{4725:function(e,t,a){a.d(t,{Z:function(){return p}});var o=a(3396),n=a(6721),l=a(4075),s=a(9234),i=a(8694),r=a(7471),c=a(1615);function u(e,t){return(0,o.wg)(),(0,o.j4)(r.i,{prominent:""},{prepend:(0,o.w5)((()=>[(0,o.Wm)(i.f,{src:n,alt:"logo",width:"70",class:"logoimage"})])),default:(0,o.w5)((()=>[(0,o.Wm)(s.C),(0,o.Wm)(s.C),(0,o.Wm)(c.l,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l.J,{inset:"",vertical:""}),(0,o.kq)("",!0)])),_:1})])),_:1})}var d=a(89);const m={},g=(0,d.Z)(m,[["render",u]]);var p=g},8441:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var o=a(3396),n=a(6824),l=a(8521);const s={class:"login"};function i(e,t,a,i,r,c){const u=(0,o.up)("loginnavbar"),d=(0,o.up)("logininput");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(u,{class:"loginnavbar-bg"}),(0,o.Wm)(n.o,{class:""},{default:(0,o.w5)((()=>[(0,o.Wm)(l.D,{class:"d-flex justify-center",xs:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"logininput"})])),_:1})])),_:1})])}var r=a(4725),c=a(9242),u=a(870),d=a(11),m=a(6422),g=a(3369),p=a(3444),v=a(2900);const f=e=>((0,o.dD)("data-v-beffb026"),e=e(),(0,o.Cn)(),e),b=f((()=>(0,o._)("div",{class:"sign-up-text"},"註冊",-1))),S=f((()=>(0,o._)("div",{class:"titleword mb-5 ml-2 text-white"},"使用者登入",-1))),w=f((()=>(0,o._)("div",{class:"ml-2 mb-1 text-blue-grey-lighten-5 textdistance"},"使用者ID",-1))),h={class:"text-blue-grey-lighten-5 d-flex align-center justify-space-between ml-2 mb-1 textdistance"},y=f((()=>(0,o._)("br",null,null,-1)));function k(e,t,a,n,l,s){return(0,o.wg)(),(0,o.j4)(g.K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d._,{class:"pa-3 cardbg","max-width":"400"},{default:(0,o.w5)((()=>[(0,o.Wm)(m.O,{modelValue:e.form,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form=t),onSubmit:(0,c.iM)(s.onSubmit,["prevent"])},{default:(0,o.w5)((()=>[e.signupshow?((0,o.wg)(),(0,o.j4)(u.T,{key:0,variant:"text",route:"",to:"/sign/up",class:"mt-2 d-flex justify-end",color:"indigo-accent-4"},{default:(0,o.w5)((()=>[b])),_:1})):(0,o.kq)("",!0),S,w,(0,o.Wm)(v.h,{density:"compact",modelValue:e.account,"onUpdate:modelValue":t[0]||(t[0]=t=>e.account=t),readonly:e.loading,rules:[s.required],class:"mb-3 mr-2 ml-2 textfield text-white",placeholder:"","bg-color":"rgba(255, 255, 255, 0.15)"},null,8,["modelValue","readonly","rules"]),(0,o._)("div",h,[(0,o.Uk)("密碼 "),(0,o.kq)("",!0)]),(0,o.Wm)(v.h,{dark:"","append-inner-icon":e.visible?"mdi-eye-off":"mdi-eye",type:e.visible?"text":"password",modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),readonly:e.loading,rules:[s.required],density:"compact",placeholder:"",class:"ml-2 mr-2 text-white","onClick:appendInner":t[2]||(t[2]=t=>e.visible=!e.visible),"bg-color":"rgba(255, 255, 255, 0.15)"},null,8,["append-inner-icon","type","modelValue","readonly","rules"]),y,(0,o.Wm)(p.v,{timeout:1e3,rounded:"pill"},{activator:(0,o.w5)((({props:t})=>[(0,o.Wm)(u.T,(0,o.dG)({loading:e.loading,type:"submit",variant:"elevated",class:"mb-12 loginbuttom"},t,{width:"150"}),null,16,["loading"])])),_:1})])),_:1},8,["modelValue","onSubmit"])])),_:1})])),_:1})}var I=a(4161);const _=a(8082);var N={data:()=>({form:!1,salt:"kowkoww151s5ww",account:null,password:null,token:"",visible:!1,loading:!1,IP:"20.89.131.34:443",usertoken:localStorage.getItem("token"),signupshow:!1}),async created(){await this.loadnewdata()},methods:{onSubmit(){const e=this.password+this.salt,t=_.MD5(e).toString();this.form&&(this.loading=!0,localStorage.setItem("username",this.account),I.Z.post("/api/v1/account/login",{username:this.account,password:t}).then((e=>{if(console.log(e),this.loading=!1,200==e.status){localStorage.setItem("UserName",e.data.username),localStorage.setItem("UserEmail",e.data.email),localStorage.setItem("UserLevel",e.data.level),localStorage.setItem("UserSection",e.data.section);const t=e.data.registrationTime,a=new Date(1e3*t),o=a.getFullYear(),n=(a.getMonth()+1).toString().padStart(2,"0"),l=a.getDate().toString().padStart(2,"0"),s=a.getHours().toString().padStart(2,"0"),i=a.getMinutes().toString().padStart(2,"0"),r=a.getSeconds().toString().padStart(2,"0"),c=`${o}-${n}-${l} ${s}:${i}:${r}`;localStorage.setItem("registrationTime",c),localStorage.setItem("token",e.data.token),document.cookie="token="+e.data.token+"; path=/";const u=e.data.poolTable,d=u.map((e=>e.id)),m=u.map((e=>e.name)),g=e.data.instructionTable,p=g.map((e=>e.id)),v=g.map((e=>e.name)),f=e.data.departTable,b=f.map((e=>e.id)),S=f.map((e=>e.name));localStorage.setItem("PoolsCode",JSON.stringify(d)),localStorage.setItem("PoolsName",JSON.stringify(m)),localStorage.setItem("InstructionCode",JSON.stringify(p)),localStorage.setItem("InstructionName",JSON.stringify(v)),localStorage.setItem("DepartCode",JSON.stringify(b)),localStorage.setItem("DepartName",JSON.stringify(S)),localStorage.setItem("PoolsCode2",JSON.stringify(d)),localStorage.setItem("PoolsName2",JSON.stringify(m)),localStorage.setItem("InstructionCode2",JSON.stringify(p)),localStorage.setItem("InstructionName2",JSON.stringify(v)),localStorage.setItem("DepartCode2",JSON.stringify(b)),localStorage.setItem("DepartName2",JSON.stringify(S)),localStorage.setItem("chooseSectionname","全部"),window.location.replace("/home")}else this.$Message.error("登入失敗")})).catch((e=>{console.log(e),this.loading=!1,this.$Message.error("登入失敗")})))},required(e){return!!e||"此區為必填區域"},async loadnewdata(){try{const e=await I.Z.get("/api/v1/account",{headers:{Authorization:`Bearer ${this.usertoken}`}});console.log(e),200===e.status&&("123"==e.data.username?this.signupshow=!0:window.location.replace("/home"))}catch(e){}}}},C=a(89);const W=(0,C.Z)(N,[["render",k],["__scopeId","data-v-beffb026"]]);var x=W,V={name:"login",components:{logininput:x,loginnavbar:r.Z},data:()=>({})};const O=(0,C.Z)(V,[["render",i]]);var D=O},6422:function(e,t,a){a.d(t,{O:function(){return m}});var o=a(3396),n=a(9166),l=a(4357),s=a(3185),i=a(4870),r=a(3766),c=a(1107),u=a(9888);const d=(0,r.U)({...(0,n.l)(),...(0,l.vC)()},"VForm"),m=(0,c.ev)()({name:"VForm",props:d(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:a,emit:n}=t;const r=(0,l.Np)(e),c=(0,i.iH)();function d(e){e.preventDefault(),r.reset()}function m(e){const t=e,a=r.validate();t.then=a.then.bind(a),t.catch=a.catch.bind(a),t.finally=a.finally.bind(a),n("submit",t),t.defaultPrevented||a.then((e=>{let{valid:t}=e;t&&c.value?.submit()})),t.preventDefault()}return(0,u.L)((()=>(0,o.Wm)("form",{ref:c,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:d,onSubmit:m},[a.default?.(r)]))),(0,s.F)(r,c)}})},3444:function(e,t,a){a.d(t,{v:function(){return h}});var o=a(3396),n=a(836),l=a(8429),s=a(3185),i=a(5180),r=a(489),c=a(8717),u=a(4231),d=a(5975),m=a(7041),g=a(5221),p=a(4870),v=a(3766),f=a(131),b=a(1107),S=a(9888);const w=(0,v.U)({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...(0,i.y)({location:"bottom"}),...(0,r.F)(),...(0,u.I)(),...(0,g.bk)(),...(0,m.x$)(),...(0,f.CE)((0,l.B)({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),h=(0,b.ev)()({name:"VSnackbar",props:w(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const v=(0,c.z)(e,"modelValue"),{locationStyles:f}=(0,i.T)(e),{positionClasses:b}=(0,r.K)(e),{scopeId:w}=(0,d.a)(),{themeClasses:h}=(0,m.ER)(e),{colorClasses:y,colorStyles:k,variantClasses:I}=(0,g.c1)(e),{roundedClasses:_}=(0,u.b)(e),N=(0,p.iH)();(0,o.YP)(v,W),(0,o.YP)((()=>e.timeout),W),(0,o.bv)((()=>{v.value&&W()}));let C=-1;function W(){window.clearTimeout(C);const t=Number(e.timeout);v.value&&-1!==t&&(C=window.setTimeout((()=>{v.value=!1}),t))}function x(){window.clearTimeout(C)}return(0,S.L)((()=>{const[t]=l.y.filterProps(e);return(0,o.Wm)(l.y,(0,o.dG)({ref:N,class:["v-snackbar",{"v-snackbar--active":v.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--vertical":e.vertical},b.value,e.class],style:e.style},t,{modelValue:v.value,"onUpdate:modelValue":e=>v.value=e,contentProps:(0,o.dG)({class:["v-snackbar__wrapper",h.value,y.value,_.value,I.value],style:[f.value,k.value],onPointerenter:x,onPointerleave:W},t.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},w),{default:()=>[(0,g.Ux)(!1,"v-snackbar"),a.default&&(0,o.Wm)("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[a.default()]),a.actions&&(0,o.Wm)(n.z,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[(0,o.Wm)("div",{class:"v-snackbar__actions"},[a.actions()])]})],activator:a.activator})})),(0,s.F)({},N)}})}}]);
//# sourceMappingURL=441.e64ef0d6.js.map