{"version":3,"file":"js/677.407e8146.js","mappings":"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","sources":["webpack://webpage1/./src/views/Login.vue","webpack://webpage1/./src/components/logininput.vue","webpack://webpage1/./src/components/logininput.vue?a7e7","webpack://webpage1/./src/views/Login.vue?240b"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <loginnavbar class=\"loginnavbar-bg\"></loginnavbar>\r\n      <v-row class=\"\">\r\n        <v-col\r\n          class=\"d-flex justify-center\"\r\n          xs=\"12\"\r\n        >\r\n          <logininput class=\"logininput\"></logininput>\r\n        </v-col>\r\n      </v-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport loginnavbar from '@/components/loginnavbar.vue';\r\nimport logininput from '@/components/logininput.vue';\r\nexport default {\r\n  name: 'login',\r\n  components: { logininput ,loginnavbar},\r\n  data: () => ({\r\n    //\r\n  }),\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n.login {\r\n  background-image: url('../assets/登入頁面第二版.jpg');\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  width: 100%;\r\n  height:100%;\r\n  overflow-y: hidden;\r\n  overflow: hidden;\r\n}\r\n.loginnavbar-bg {\r\n  height: 100px; \r\n  background-color: rgba(0, 0, 0, 0); \r\n  position: absolute;\r\n}\r\n\r\n.logininput {\r\n  position: absolute;\r\n  padding-top: 9%;\r\n  left: 60%;\r\n}\r\n\r\n@media screen and (max-width: 600px) {\r\n  .logininput {\r\n    transform: scale(0.75) translateX(-79%) translateY(53%);\r\n  }\r\n\r\n\r\n  .login {\r\n  background-image: url('../assets/登入畫面手機背景.jpg');\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow-y: hidden\r\n}\r\n}\r\n\r\n@media screen and (min-width: 601px) and (max-width: 1024px) {\r\n  .logininput {\r\n    padding-left: 25%;\r\n    transform: scale(1.5);\r\n    margin-top: 25%;\r\n  }\r\n\r\n  .login {\r\n  background-image: url('../assets/background.jpg');\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  overflow-y: hidden\r\n}\r\n}\r\n\r\n@media screen and (min-width: 768px) and (max-width: 1200px) and (orientation: landscape) {\r\n  .logininput {\r\n    padding-left: 400px;\r\n    position: absolute;\r\n    transform: translateX(12%) scale(1.1);\r\n    margin-top: 7%;\r\n  }\r\n\r\n\r\n  .login {\r\n  background-image: url('../assets/登入頁平板背景.jpg');\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  width: 100%;\r\n  height:100%;\r\n  overflow-y: hidden;\r\n  overflow: hidden;\r\n}\r\n}\r\n\r\n\r\n</style>\r\n","<template>\r\n    <v-container>\r\n      <v-card class=\" pa-3 cardbg\" max-width=\"400\"    >\r\n        <v-form v-model=\"form\" @submit.prevent=\"onSubmit\" >\r\n          <v-btn variant=\"text\" route to = \"/sign/up\" class=\"mt-2   d-flex justify-end \" color=\"indigo-accent-4\"><div class=\"sign-up-text\">註冊</div></v-btn>\r\n          \r\n        <div class=\"titleword mb-5 ml-2 text-white\">使用者登入</div>\r\n        <div class=\" ml-2 mb-1 text-blue-grey-lighten-5 textdistance\">使用者ID</div>  \r\n        <v-text-field\r\n          density=\"compact\"\r\n          v-model=\"account\"\r\n          :readonly=\"loading\"\r\n          :rules=\"[required]\"\r\n          class=\"mb-3 mr-2 ml-2 textfield text-white\"\r\n          placeholder=\"\"\r\n          bg-color=\"rgba(255, 255, 255, 0.15)\"\r\n        ></v-text-field>\r\n          <div\r\n        class=\"text-blue-grey-lighten-5   d-flex align-center justify-space-between ml-2 mb-1 textdistance\"\r\n      >密碼\r\n        <a\r\n          class=\"text-caption text-decoration-underline text-blue ml-2 textdistance\"\r\n          href=\"#\"\r\n          rel=\"noopener noreferrer\"\r\n          target=\"_blank\"\r\n          v-if=\"false\"\r\n        >\r\n          忘記密碼?</a\r\n        >\r\n      </div>\r\n          <v-text-field\r\n            dark\r\n            :append-inner-icon=\"visible ? 'mdi-eye-off' : 'mdi-eye'\"\r\n            :type=\"visible ? 'text' : 'password'\"\r\n            v-model=\"password\"\r\n            :readonly=\"loading\"\r\n            :rules=\"[required]\"\r\n            density=\"compact\"\r\n            placeholder=\"\"\r\n            class=\"ml-2 mr-2 text-white\"\r\n            @click:append-inner=\"visible = !visible\"\r\n            bg-color=\"rgba(255, 255, 255, 0.15)\"\r\n          ></v-text-field>\r\n          <br>\r\n  \r\n          \r\n          <v-snackbar :timeout=\"1000\"  rounded=\"pill\">\r\n      <template v-slot:activator=\"{ props }\">\r\n        <v-btn\r\n            :loading=\"loading\"\r\n            type=\"submit\"\r\n            variant=\"elevated\"\r\n            class=\"mb-12 loginbuttom\"\r\n            v-bind=\"props\"\r\n            width=\"150\"\r\n          > </v-btn>\r\n      </template>\r\n    </v-snackbar>\r\n          </v-form>\r\n      \r\n        \r\n      </v-card>\r\n    \r\n    </v-container>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios';\r\n  const CryptoJS = require(\"crypto-js\");\r\n    export default {\r\n      data: () => ({\r\n        form: false,\r\n        salt:  \"kowkoww151s5ww\",\r\n        account: null,\r\n        password: null,\r\n        token:'',\r\n        visible: false,\r\n        loading: false,\r\n        IP:process.env.VUE_APP_IP,\r\n        usertoken:localStorage.getItem('token'),\r\n      }),\r\n      async created() {\r\n        await this.loadnewdata();\r\n\r\n        },\r\n      methods: {\r\n        onSubmit () {\r\n          const saltedPassword = this.password + this.salt;\r\n          const hashedPassword = CryptoJS.MD5(saltedPassword).toString();\r\n          if (!this.form) return\r\n          this.loading = true\r\n          localStorage.setItem(\"username\",this.account)\r\n          axios.post(\r\n            \"/api/v1/account/login\",\r\n            {\r\n              \"username\":this.account,\r\n              \"password\":hashedPassword\r\n            },\r\n          )\r\n          .then(res=> {\r\n              console.log(res);\r\n              this.loading = false;\r\n              if(res.status == 200){\r\n                localStorage.setItem(\"UserName\",res.data.username)\r\n                localStorage.setItem(\"UserEmail\",res.data.email)\r\n                localStorage.setItem(\"UserLevel\",res.data.level)\r\n                localStorage.setItem(\"UserSection\",res.data.section)\r\n                const timestamp = res.data.registrationTime\r\n                const date = new Date(timestamp * 1000); \r\n                const year = date.getFullYear();\r\n                const month = (date.getMonth() + 1).toString().padStart(2, '0'); \r\n                const day = date.getDate().toString().padStart(2, '0'); \r\n                const hours = date.getHours().toString().padStart(2, '0'); \r\n                const minutes = date.getMinutes().toString().padStart(2, '0'); \r\n                const seconds = date.getSeconds().toString().padStart(2, '0'); \r\n                const formattedDate = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\r\n                localStorage.setItem(\"registrationTime\",formattedDate)\r\n                localStorage.setItem(\"token\",res.data.token)\r\n                document.cookie = \"token=\" + res.data.token + \"; path=/\";\r\n                const poolTable = res.data.poolTable;\r\n                const poolLocations = poolTable.map(pool => pool.id);\r\n                const poolnames = poolTable.map(pool => pool.name);\r\n                const instructiontable = res.data.instructionTable;\r\n                const instructioncode =  instructiontable.map(ins => ins.id);\r\n                const instructionname =  instructiontable.map(ins => ins.name);\r\n                const departTable = res.data.departTable;\r\n                const departcode =  departTable.map(ins => ins.id);\r\n                const departname =  departTable.map(ins => ins.name);\r\n                localStorage.setItem(\"PoolsCode\", JSON.stringify(poolLocations));\r\n                localStorage.setItem(\"PoolsName\", JSON.stringify(poolnames));\r\n                localStorage.setItem(\"InstructionCode\", JSON.stringify(instructioncode));\r\n                localStorage.setItem(\"InstructionName\", JSON.stringify(instructionname));\r\n                localStorage.setItem(\"DepartCode\", JSON.stringify(departcode));\r\n                localStorage.setItem(\"DepartName\", JSON.stringify(departname));\r\n                localStorage.setItem(\"UserImage\", \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ1f4J_Qn_tU9gsrwEcIxIdFzgGYVt_mbCjDg&usqp=CAU\");\r\n                if (res.data.section == \"001\" && res.data.level <= 10) {\r\n                  if (window.innerWidth <= 600) { \r\n                      window.location.replace(`/home`);\r\n                  } else {\r\n                      window.location.replace(`/select/instruction`);\r\n                  }\r\n                } else {\r\n                    window.location.replace(`/home`);\r\n                }\r\n              }\r\n              else\r\n              this.$Message.error('登入失敗');\r\n          })\r\n          .catch(err=> {\r\n              console.log(err);\r\n              this.loading = false;\r\n              this.$Message.error('登入失敗');\r\n          })\r\n        },\r\n        required (v) {\r\n        return !!v || '此區為必填區域'\r\n      },\r\n      async loadnewdata() {\r\n          try {\r\n            const response = await axios.get(\r\n              \"/api/v1/account\",\r\n              {\r\n                headers: {\r\n                  Authorization: `Bearer ${this.usertoken}`\r\n                }\r\n              }\r\n            );\r\n\r\n            console.log(response);\r\n            if (response.status === 200) {\r\n              window.location.replace(`/home`);\r\n            }\r\n          } catch (error) {\r\n            //console.log(error);\r\n          }\r\n          },\r\n        \r\n      }\r\n    }\r\n  </script>\r\n\r\n  <style scoped>\r\n  .cardbg {\r\n  border-radius: 30px;\r\n  background-image: linear-gradient(to right bottom, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.01), rgba(255, 255, 255, 0.15));\r\n  background-color: rgba(255, 255, 255, 0.05); \r\n  backdrop-filter: blur(1px);\r\n  border: 3px solid rgba(255, 255, 255, 0.2);\r\n}\r\n.textfield{\r\n  border-radius: 360px;\r\n}\r\n.titleword{\r\n  font-size: 20px;\r\n  letter-spacing: 6px;\r\n}\r\n.sign-up-text{\r\n  margin-left: 50%;\r\n  font-size: large;\r\n  letter-spacing: 6px;\r\n}\r\n.textdistance{\r\n  letter-spacing: 6px;\r\n}\r\n\r\n.loginbuttom{\r\n  border-radius: 80px;\r\n  background-image: url('../assets/登入鈕改.png');\r\n  background-position: center;\r\n  background-size: 101% 101%;\r\n  left: 30%;\r\n  transform: scale(1.1);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n</style>\r\n","import { render } from \"./logininput.vue?vue&type=template&id=8815bd00&scoped=true\"\nimport script from \"./logininput.vue?vue&type=script&lang=js\"\nexport * from \"./logininput.vue?vue&type=script&lang=js\"\n\nimport \"./logininput.vue?vue&type=style&index=0&id=8815bd00&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8815bd00\"]])\n\nexport default __exports__","import { render } from \"./Login.vue?vue&type=template&id=35729aed\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=35729aed&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_loginnavbar","_component_v_row","_component_v_col","xs","_component_logininput","_createElementVNode","_createBlock","_component_v_container","_component_v_card","_component_v_form","_ctx","form","$event","onSubmit","_withModifiers","$options","_component_v_btn","variant","route","to","color","_hoisted_2","_hoisted_3","_component_v_text_field","density","account","readonly","loading","rules","required","placeholder","_hoisted_4","dark","visible","type","password","_cache","_hoisted_6","_component_v_snackbar","timeout","rounded","activator","_withCtx","props","_mergeProps","width","CryptoJS","require","data","salt","token","IP","process","usertoken","localStorage","getItem","async","this","loadnewdata","methods","saltedPassword","hashedPassword","MD5","toString","setItem","axios","post","then","res","console","log","status","username","email","level","section","timestamp","registrationTime","date","Date","year","getFullYear","month","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","formattedDate","document","cookie","poolTable","poolLocations","map","pool","id","poolnames","name","instructiontable","instructionTable","instructioncode","ins","instructionname","departTable","departcode","departname","JSON","stringify","window","innerWidth","location","replace","$Message","error","catch","err","v","response","get","headers","Authorization","__exports__","components","logininput","loginnavbar","render"],"sourceRoot":""}