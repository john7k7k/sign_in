"use strict";(self["webpackChunkwebpage1"]=self["webpackChunkwebpage1"]||[]).push([[347],{7347:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var a=n(3396);const i={class:"Speech"};function s(e,t,n,s,o,l){const c=(0,a.up)("navbar"),r=(0,a.up)("Speech");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(c),(0,a.Wm)(r)])}var o=n(7139),l=n(9242),c=n(870),r=n(11),d=n(6145),g=n(8777);const h=e=>((0,a.dD)("data-v-7d945fcb"),e=e(),(0,a.Cn)(),e),u={class:"configureBackdrop"},p={class:"startBox"},w={class:"startBoxItem1"},m={class:"startBoxItem2"},v={class:"startWordCSS"},f={key:0,class:"menu-container"},S={class:"box"},_={class:"tital"},b={for:"dropdown",style:{color:"white"}},I=["value"],x={for:"languageSelect",style:{color:"white"}},W=h((()=>(0,a._)("option",{value:"en-US",style:{color:"white"}},"英文",-1))),C=h((()=>(0,a._)("option",{value:"zh-CN",style:{color:"white"}},"中文",-1))),k=[W,C],y=h((()=>(0,a._)("br",null,null,-1))),z={class:"resultTital"},L={class:"Resultsword"};function B(e,t,n,i,s,h){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.wy)((0,a._)("div",u,[(0,a._)("div",p,[(0,a._)("div",w,[(0,a._)("div",{class:"startTital",style:(0,o.j5)({fontSize:1===s.languageIndex?"40px":"50px"})},(0,o.zw)(s.titalWord[s.languageIndex]),5)]),(0,a._)("div",m,[(0,a._)("div",v,[(0,a._)("p",null,(0,o.zw)(s.starttitalWord[s.languageIndex][0]),1),(0,a._)("p",null,(0,o.zw)(s.starttitalWord[s.languageIndex][1]),1)]),(0,a.Wm)(c.T,{class:"startBtnCSS",onClick:h.toggleMenu,variant:"flat"},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"startBtnCSScontainer",style:(0,o.j5)({fontSize:1===s.languageIndex?"16px":"19px"})},(0,o.zw)(s.languageWord[s.languageIndex]),5)])),_:1},8,["onClick"]),s.isMenuVisible?((0,a.wg)(),(0,a.iD)("div",f,[(0,a.Wm)(d.i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g.l,{onClick:t[0]||(t[0]=e=>h.selectLanguage("zh"))},{default:(0,a.w5)((()=>[(0,a.Uk)("中文")])),_:1}),(0,a.Wm)(g.l,{onClick:t[1]||(t[1]=e=>h.selectLanguage("en"))},{default:(0,a.w5)((()=>[(0,a.Uk)("English")])),_:1})])),_:1})])):(0,a.kq)("",!0),(0,a.Wm)(c.T,{class:"startBtnCSS",onClick:t[2]||(t[2]=e=>s.showBackdrop=!1),variant:"flat"},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"startBtnCSScontainer",style:(0,o.j5)({fontSize:1===s.languageIndex?"16px":"19px"})},(0,o.zw)(s.ChooseFishWord[s.languageIndex]),5)])),_:1}),(0,a.Wm)(c.T,{class:"startBtnCSS",onClick:t[3]||(t[3]=e=>s.showBackdrop=!1),variant:"flat"},{default:(0,a.w5)((()=>[(0,a._)("div",{class:"startBtnCSScontainer",style:(0,o.j5)({fontSize:1===s.languageIndex?"16px":"19px"})},(0,o.zw)(s.startBtnWord[s.languageIndex]),5)])),_:1})])])],512),[[l.F8,s.showBackdrop]]),(0,a._)("div",S,[(0,a.Wm)(c.T,{variant:"text",class:"changeLan",onClick:e.changeLangWord},{default:(0,a.w5)((()=>[(0,a.Uk)("繁中/En")])),_:1},8,["onClick"]),(0,a._)("div",_,(0,o.zw)(s.titalWord[s.languageIndex]),1),(0,a._)("div",null,[(0,a.wy)((0,a._)("label",b,"選擇控制魚的ID:",512),[[l.F8,!1]]),(0,a.wy)((0,a._)("select",{id:"dropdown","onUpdate:modelValue":t[4]||(t[4]=e=>s.selectedfishUID=e),onChange:t[5]||(t[5]=(...e)=>h.handleChange&&h.handleChange(...e))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.options,((e,t)=>((0,a.wg)(),(0,a.iD)("option",{key:t,value:e.value},(0,o.zw)(e.label),9,I)))),128))],544),[[l.bM,s.selectedfishUID]])]),(0,a.wy)((0,a._)("label",x,"選擇語言:",512),[[l.F8,!1]]),(0,a.wy)((0,a._)("select",{id:"languageSelect","onUpdate:modelValue":t[6]||(t[6]=e=>s.selectedLanguage=e),onChange:t[7]||(t[7]=(...e)=>h.changeLanguage&&h.changeLanguage(...e)),class:"changeLanCSS"},k,544),[[l.bM,s.selectedLanguage],[l.F8,!1]]),y,(0,a.Wm)(r._,{class:"resultcard"},{default:(0,a.w5)((()=>[(0,a._)("p",z,(0,o.zw)(s.resultWord[s.languageIndex]),1),(0,a._)("div",L,(0,o.zw)(s.command),1)])),_:1}),(0,a.wy)((0,a._)("p",{class:"failresultWord"},(0,o.zw)(s.failword[s.languageIndex]),513),[[l.F8,s.isFail]]),(0,a.Wm)(c.T,{class:"btn-bg text-white",onClick:h.toggleSpeechRecognition,icon:s.icon,size:"80"},null,8,["onClick","icon"]),(0,a.wy)((0,a._)("div",{style:{color:"white"},class:"beginWord"},(0,o.zw)(s.startWord[s.languageIndex]),513),[[l.F8,!s.isListening]]),(0,a.wy)((0,a._)("div",{style:{color:"white"},class:"beginWord"},(0,o.zw)(s.endWord[s.languageIndex]),513),[[l.F8,s.isListening]])])],64)}var F=n(4161),D={data(){return{showBackdrop:!0,starttitalWord:[["體驗語音操控的樂趣","讓聲音引導機器魚游動！"],["Start experiencing your voice","guiding the robotic fish to swim!"]],startBtnWord:["開始體驗","Start"],selectedfishUID:null,options:[{value:"option1",label:"選項 1"},{value:"option2",label:"選項 2"},{value:"option3",label:"選項 3"}],recognition:null,selectedLanguage:["zh-CN","en-US"],recognitionResult:"",command:"",isListening:!1,icon:"mdi mdi-microphone",English:"en-US",languageIndex:0,titalWord:["語音控制","Voice Control"],resultWord:["辨識結果","Identification results"],startWord:["開始辨識","Start recognition"],endWord:["結束辨識","End recognition"],commandWord:["辨識中","Identifying"],failword:["辨識失敗，請再說一次","Recognition failed, please say again"],isFail:!1,isMenuVisible:!1,languageWord:["選擇語言▼","Language▼"],ChooseFishWord:["選擇魚▼","Choose fish▼"]}},mounted(){this.fetchOptions(),this.recognition=new window.webkitSpeechRecognition,this.recognition.lang=this.selectedLanguage[this.languageIndex],this.recognition.onresult=e=>{this.recognitionResult=e.results[0][0].transcript,this.submit()}},methods:{toggleSpeechRecognition(){this.isListening?(this.icon="mdi mdi-microphone",this.endSpeechRecognition()):(this.icon="mdi mdi-stop",this.startSpeechRecognition())},startSpeechRecognition(){this.isListening=!0,this.recognition.start(),this.recognitionResult=this.commandWord[this.languageIndex],this.command=this.commandWord[this.languageIndex],this.isFail=!1},endSpeechRecognition(){this.isListening=!1,this.recognition.stop(),this.recognition.onresult},changeLanguage(){this.recognition.lang=this.selectedLanguage},submit(){F.Z.post("/api/v1/fish/voice",{text:this.recognitionResult,fishUID:this.selectedfishUID},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((({data:e})=>{e.includes("辨識失敗")?(this.isFail=!0,this.command=""):(this.command=e,this.isFail=!1)})).catch((e=>{console.error("Error submitting voice data:",e)}))},handleChange(){this.$emit("change",this.selectedOption)},async fetchOptions(){this.options=Object.keys(this.flatten((await F.Z.get("/api/v1/account",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.fishesID)).map((e=>({value:e.slice(-7),label:e.slice(-4)}))),console.log(this.options)},traverseAndFlatten(e,t,n){for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i;i=void 0===n?a:n+"."+a;var s=e[a];"object"===typeof s?this.traverseAndFlatten(s,t,i):t[i]=s}},flatten(e){var t={};return this.traverseAndFlatten(e,t),t},toggleMenu(){this.isMenuVisible=!this.isMenuVisible},selectLanguage(e){this.isMenuVisible=!1,"zh"==e?this.languageIndex=0:"en"==e&&(this.languageIndex=1)}}},U=n(89);const R=(0,U.Z)(D,[["render",B],["__scopeId","data-v-7d945fcb"]]);var M=R,V=n(4947),j={name:"speech",components:{Speech:M,navbar:V.Z},data(){return{fishUID:""}},methods:{update(e){this.fishUID=e}}};const T=(0,U.Z)(j,[["render",s],["__scopeId","data-v-1bf295b6"]]);var O=T}}]);
//# sourceMappingURL=347.2e00aa1d.js.map