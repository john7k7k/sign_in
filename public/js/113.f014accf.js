"use strict";(self["webpackChunkwebpage1"]=self["webpackChunkwebpage1"]||[]).push([[113],{1113:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var a=n(3396);const o={class:"Speech"};function i(e,t,n,i,s,l){const c=(0,a.up)("navbar"),r=(0,a.up)("Speech");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(c),(0,a.Wm)(r)])}var s=n(9242),l=n(7139),c=n(870),r=n(11);const h=e=>((0,a.dD)("data-v-4450aa34"),e=e(),(0,a.Cn)(),e),u={class:"box"},d=h((()=>(0,a._)("div",{class:"tital"},"語音控制",-1))),g={for:"dropdown",style:{color:"white"}},p=["value"],v={for:"languageSelect",style:{color:"white"}},w=h((()=>(0,a._)("option",{value:"en-US",style:{color:"white"}},"英文",-1))),b=h((()=>(0,a._)("option",{value:"zh-CN",style:{color:"white"}},"中文",-1))),f=[w,b],m=h((()=>(0,a._)("br",null,null,-1))),_=h((()=>(0,a._)("p",{class:"resultTital"},"辨識結果",-1))),y={class:"Resultsword"},D=h((()=>(0,a._)("div",{style:{color:"white"},class:"beginWord"},"開始辨識",-1)));function I(e,t,n,o,i,h){return(0,a.wg)(),(0,a.iD)("div",u,[d,(0,a._)("div",null,[(0,a.wy)((0,a._)("label",g,"選擇控制魚的ID:",512),[[s.F8,!1]]),(0,a.wy)((0,a._)("select",{id:"dropdown","onUpdate:modelValue":t[0]||(t[0]=e=>i.selectedfishUID=e),onChange:t[1]||(t[1]=(...e)=>h.handleChange&&h.handleChange(...e))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.options,((e,t)=>((0,a.wg)(),(0,a.iD)("option",{key:t,value:e.value},(0,l.zw)(e.label),9,p)))),128))],544),[[s.bM,i.selectedfishUID]])]),(0,a.wy)((0,a._)("label",v,"選擇語言:",512),[[s.F8,!1]]),(0,a.wy)((0,a._)("select",{id:"languageSelect","onUpdate:modelValue":t[2]||(t[2]=e=>i.selectedLanguage=e),onChange:t[3]||(t[3]=(...e)=>h.changeLanguage&&h.changeLanguage(...e)),style:{color:"white"}},f,544),[[s.bM,i.selectedLanguage],[s.F8,!1]]),m,_,(0,a.Wm)(r._,{class:"resultcard"},{default:(0,a.w5)((()=>[(0,a._)("div",y,(0,l.zw)(i.recognitionResult),1)])),_:1}),(0,a.Wm)(c.T,{class:"btn-bg text-white",onClick:h.startSpeechRecognition,icon:"mdi mdi-microphone",size:"80"},null,8,["onClick"]),D])}var C=n(4161),k={data(){return{selectedfishUID:null,options:[{value:"option1",label:"選項 1"},{value:"option2",label:"選項 2"},{value:"option3",label:"選項 3"}],recognition:null,selectedLanguage:"zh-CN",recognitionResult:""}},mounted(){this.fetchOptions(),this.recognition=new window.webkitSpeechRecognition,this.recognition.lang=this.selectedLanguage,this.recognition.onresult=e=>{this.recognitionResult=e.results[0][0].transcript,this.submit()}},methods:{startSpeechRecognition(){this.recognition.start(),this.recognitionResult="辨識中"},changeLanguage(){this.recognition.lang=this.selectedLanguage},submit(){C.Z.post("/api/v1/fish/voice",{text:this.recognitionResult,fishUID:this.selectedfishUID},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((({data:e})=>alert("辨識結果: "+e)))},handleChange(){this.$emit("change",this.selectedOption)},async fetchOptions(){this.options=Object.keys(this.flatten((await C.Z.get("/api/v1/account",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data.fishesID)).map((e=>({value:e.slice(-7),label:e.slice(-4)}))),console.log(this.options)},traverseAndFlatten(e,t,n){for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o;o=void 0===n?a:n+"."+a;var i=e[a];"object"===typeof i?this.traverseAndFlatten(i,t,o):t[o]=i}},flatten(e){var t={};return this.traverseAndFlatten(e,t),t}}},S=n(89);const U=(0,S.Z)(k,[["render",I],["__scopeId","data-v-4450aa34"]]);var R=U,L=n(812),z={name:"speech",components:{Speech:R,navbar:L.Z},data(){return{fishUID:""}},methods:{update(e){this.fishUID=e}}};const F=(0,S.Z)(z,[["render",i],["__scopeId","data-v-1bf295b6"]]);var O=F}}]);
//# sourceMappingURL=113.f014accf.js.map