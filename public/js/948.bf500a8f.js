"use strict";(self["webpackChunkwebpage1"]=self["webpackChunkwebpage1"]||[]).push([[948],{5948:function(e,s,i){i.r(s),i.d(s,{default:function(){return A}});var t=i(3396);const n={class:"Speech"};function a(e,s,i,a,o,l){const h=(0,t.up)("Speech");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(h)])}var o=i(7139),l=i(9242),h=i(870),c=i(11),r=i(6572),g=i(8694),d=i(6145),u=i(8777);const f=e=>((0,t.dD)("data-v-166249d8"),e=e(),(0,t.Cn)(),e),p={class:"ChoseFishBox"},w={class:"ChoseFishItem1"},m={class:"ChoseFishLabel"},C={class:"ChoseFishItem2"},I={class:"configureBackdrop"},v={class:"startBox"},x={class:"startBoxItem1"},W={class:"startBoxItem2"},_={class:"startWordCSS"},k={key:0,class:"menu-container"},S={class:"box"},F={class:"tital"},y={for:"dropdown",style:{color:"white"}},b=["value"],U={for:"languageSelect",style:{color:"white"}},L=f((()=>(0,t._)("option",{value:"en-US",style:{color:"white"}},"英文",-1))),z=f((()=>(0,t._)("option",{value:"zh-CN",style:{color:"white"}},"中文",-1))),D=[L,z],R=f((()=>(0,t._)("br",null,null,-1))),B={class:"resultTital"},E={class:"Resultsword"};function M(e,s,i,n,a,f){return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.wy)((0,t._)("div",p,[(0,t._)("div",w,[(0,t._)("label",m,(0,o.zw)(a.ChosefishWord[a.languageIndex]),1),(0,t.Wm)(h.T,{color:"white",class:"ChoseFishLabel",icon:"mdi mdi-close-thick",variant:"text",onClick:s[0]||(s[0]=e=>a.isChoseFish=!1)})]),(0,t._)("div",C,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(this.Chfishnicknames,((e,s)=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(c._,{key:e,class:"ChoseFishcard",onClick:s=>f.selectFish(e)},{default:(0,t.w5)((()=>[(0,t.Wm)(g.f,{class:"ChoseFishImg",height:"80%",src:a.fishurl[s]},null,8,["src"]),(0,t.Wm)(r.E,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[l.F8,0==this.languageIndex]]))),128)),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(this.Enfishnicknames,((e,s)=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(c._,{key:e,class:"ChoseFishcard",onClick:s=>f.selectFish(e)},{default:(0,t.w5)((()=>[(0,t.Wm)(g.f,{class:"ChoseFishImg",height:"80%",src:a.fishurl[s]},null,8,["src"]),(0,t.Wm)(r.E,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[l.F8,1==this.languageIndex]]))),128))])],512),[[l.F8,a.isChoseFish]]),(0,t.wy)((0,t._)("div",I,[(0,t._)("div",v,[(0,t._)("div",x,[(0,t._)("div",{class:"startTital",style:(0,o.j5)({fontSize:1===a.languageIndex?"30px":"40px"})},(0,o.zw)(a.titalWord[a.languageIndex]),5)]),(0,t._)("div",W,[(0,t._)("div",_,[(0,t._)("p",null,(0,o.zw)(a.starttitalWord[a.languageIndex][0]),1),(0,t._)("p",null,(0,o.zw)(a.starttitalWord[a.languageIndex][1]),1)]),(0,t.Wm)(h.T,{class:"startBtnCSS",onClick:f.toggleMenu,variant:"flat"},{default:(0,t.w5)((()=>[(0,t._)("div",{class:"startBtnCSScontainer",style:(0,o.j5)({fontSize:1===a.languageIndex?"16px":"19px"})},(0,o.zw)(a.languageWord[a.languageIndex]),5)])),_:1},8,["onClick"]),a.isMenuVisible?((0,t.wg)(),(0,t.iD)("div",k,[(0,t.Wm)(d.i,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u.l,{onClick:s[1]||(s[1]=e=>f.selectLanguage("zh"))},{default:(0,t.w5)((()=>[(0,t.Uk)("中文")])),_:1}),(0,t.Wm)(u.l,{onClick:s[2]||(s[2]=e=>f.selectLanguage("en"))},{default:(0,t.w5)((()=>[(0,t.Uk)("English")])),_:1})])),_:1})])):(0,t.kq)("",!0),(0,t.Wm)(h.T,{class:"startBtnCSS",onClick:s[3]||(s[3]=e=>a.isChoseFish=!0),variant:"flat"},{default:(0,t.w5)((()=>[(0,t._)("div",{class:"startBtnCSScontainer",style:(0,o.j5)({fontSize:1===a.languageIndex?"16px":"19px"})},(0,o.zw)(a.ChooseFishWord[a.languageIndex]),5)])),_:1}),(0,t.Wm)(h.T,{class:"startBtnCSS",onClick:f.startVoiceRecognition,variant:"flat"},{default:(0,t.w5)((()=>[(0,t._)("div",{class:"startBtnCSScontainer",style:(0,o.j5)({fontSize:1===a.languageIndex?"16px":"19px"})},(0,o.zw)(a.startBtnWord[a.languageIndex]),5)])),_:1},8,["onClick"])])])],512),[[l.F8,a.showBackdrop]]),(0,t._)("div",S,[(0,t.wy)((0,t.Wm)(h.T,{variant:"text",class:"changeLan",onClick:e.changeLangWord},{default:(0,t.w5)((()=>[(0,t.Uk)("繁中/En")])),_:1},8,["onClick"]),[[l.F8,!1]]),(0,t._)("div",F,(0,o.zw)(a.titalWord[a.languageIndex]),1),(0,t._)("div",null,[(0,t.wy)((0,t._)("label",y,"選擇控制魚的ID:",512),[[l.F8,!1]]),(0,t.wy)((0,t._)("select",{id:"dropdown","onUpdate:modelValue":s[4]||(s[4]=e=>a.selectedfishUID=e),onChange:s[5]||(s[5]=(...e)=>f.handleChange&&f.handleChange(...e))},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.options,((e,s)=>((0,t.wg)(),(0,t.iD)("option",{key:s,value:e.value},(0,o.zw)(e.label),9,b)))),128))],544),[[l.bM,a.selectedfishUID]])]),(0,t.wy)((0,t._)("label",U,"選擇語言:",512),[[l.F8,!1]]),(0,t.wy)((0,t._)("select",{id:"languageSelect","onUpdate:modelValue":s[6]||(s[6]=e=>a.selectedLanguage=e),onChange:s[7]||(s[7]=(...e)=>f.changeLanguage&&f.changeLanguage(...e)),class:"changeLanCSS"},D,544),[[l.bM,a.selectedLanguage],[l.F8,!1]]),R,(0,t.Wm)(c._,{class:"resultcard"},{default:(0,t.w5)((()=>[(0,t._)("p",B,(0,o.zw)(a.resultWord[a.languageIndex]),1),(0,t._)("div",E,(0,o.zw)(a.command),1)])),_:1}),(0,t.wy)((0,t._)("p",{class:"failresultWord"},(0,o.zw)(a.failword[a.languageIndex]),513),[[l.F8,a.isFail]]),(0,t.Wm)(h.T,{class:"btn-bg text-white",onClick:f.toggleSpeechRecognition,icon:a.icon,size:"80"},null,8,["onClick","icon"]),(0,t.wy)((0,t._)("div",{style:{color:"white"},class:"beginWord"},(0,o.zw)(a.startWord[a.languageIndex]),513),[[l.F8,!a.isListening]]),(0,t.wy)((0,t._)("div",{style:{color:"white"},class:"beginWord"},(0,o.zw)(a.endWord[a.languageIndex]),513),[[l.F8,a.isListening]])])],64)}i(7658),i(2062);var V=i(4161),j={data(){return{showBackdrop:!0,starttitalWord:[["體驗語音操控的樂趣","讓聲音引導機器魚游動！"],["Start experiencing your voice","guiding the robotic fish to swim!"]],startBtnWord:["開始體驗","Start"],selectedfishUID:null,options:[{value:"option1",label:"選項 1"},{value:"option2",label:"選項 2"},{value:"option3",label:"選項 3"}],recognition:null,selectedLanguage:["zh-CN","en-US"],recognitionResult:"",command:"",isListening:!1,icon:"mdi mdi-microphone",English:"en-US",languageIndex:0,titalWord:["語音控制","Voice Control"],resultWord:["辨識結果","Identification results"],startWord:["開始辨識","Start recognition"],endWord:["結束辨識","End recognition"],commandWord:["辨識中","Identifying"],failword:["辨識失敗，請再說一次","Recognition failed, please say again"],isFail:!1,isMenuVisible:!1,languageWord:["選擇語言▼","Language▼"],ChooseFishWord:["選擇魚▼","Choose fish▼"],initialChooseFishWord:["選擇魚▼","Choose fish▼"],isChoseFish:!1,fishurl:[],fishUIDs:[],Chfishnicknames:[],Enfishnicknames:[],ChosefishWord:["選擇想要控制的魚:","Select the fish you want to control:"]}},mounted(){this.fetchOptions(),this.recognition=new window.webkitSpeechRecognition,this.recognition.lang=this.selectedLanguage[this.languageIndex],this.recognition.onresult=e=>{this.recognitionResult=e.results[0][0].transcript,console.log(this.recognitionResult),this.submit()},this.recognition.onend=()=>{this.isListening&&this.startSpeechRecognition()}},methods:{toggleSpeechRecognition(){this.isListening?(this.icon="mdi mdi-microphone",this.endSpeechRecognition()):(this.icon="mdi mdi-stop",this.startSpeechRecognition())},startSpeechRecognition(){this.isListening=!0,this.recognition.start(),this.recognitionResult=this.commandWord[this.languageIndex],this.command=this.commandWord[this.languageIndex],this.isFail=!1},endSpeechRecognition(){this.isListening=!1,this.recognition.stop(),this.recognition.onresult},changeLanguage(){this.recognition.lang=this.selectedLanguage},submit(){V.Z.post("/api/v1/fish/voice",{text:this.recognitionResult,fishUID:this.selectedfishUID}).then((({data:e})=>{e.includes("辨識失敗")?(this.isFail=!0,this.command=""):(this.command=e,this.isFail=!1)})).catch((e=>{console.error("Error submitting voice data:",e)}))},handleChange(){this.$emit("change",this.selectedOption)},async fetchOptions(){try{const i=await V.Z.get("/api/v1/alivefish?location=002001001",{});if(console.log(i),200===i.status){for(var e=0;e<i.data.length;e++){this.fishUIDs.push(i.data[e].fishUID);let s=i.data[e].nickName.split(":");this.Chfishnicknames.push(s[0]),this.Enfishnicknames.push(s[1])}for(var s=0;s<this.fishUIDs.length;s++)this.fetchImageSource(this.fishUIDs[s])}}catch(i){console.log(i)}},selectFish(e){let s=null;s=0==this.languageIndex?this.Chfishnicknames.indexOf(e):this.Enfishnicknames.indexOf(e),this.selectedfishUID=this.fishUIDs[s],this.ChooseFishWord[this.languageIndex]=e,this.isChoseFish=!1},async fetchImageSource(e){try{const s=await V.Z.get("/api/v1/fish/photos/?fishUID="+e,{responseType:"blob"});console.log(s),void 0!==s.data?this.fishurl.push(URL.createObjectURL(s.data)):(e=parseInt(e.toString().slice(-4)),3002===e||3009===e||3013===e?this.fishurl.push(i(9735)("./新花色"+e+".png")):e<=4e3?this.fishurl.push(i(6757)):this.fishurl.push(i(6858)))}catch(s){e=parseInt(e.toString().slice(-4)),3002===e||3009===e||3013===e?this.fishurl.push(i(9735)("./新花色"+e+".png")):e<=4e3?this.fishurl.push(i(6757)):this.fishurl.push(i(6858))}},startVoiceRecognition(){0==this.languageIndex&&"選擇魚▼"!==this.ChooseFishWord[0]||1==this.languageIndex&&"Choose fish▼"!==this.ChooseFishWord[1]?this.showBackdrop=!1:0==this.languageIndex?this.$Message.error("請先選擇要控制的魚"):this.$Message.error("Please select the fish you want to control first")},traverseAndFlatten(e,s,i){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n;n=void 0===i?t:i+"."+t;var a=e[t];"object"===typeof a?this.traverseAndFlatten(a,s,n):s[n]=a}},flatten(e){var s={};return this.traverseAndFlatten(e,s),s},toggleMenu(){this.isMenuVisible=!this.isMenuVisible},selectLanguage(e){this.isMenuVisible=!1,"zh"==e?(this.languageIndex=0,this.languageWord[this.languageIndex]="中文"):"en"==e&&(this.languageIndex=1,this.languageWord[this.languageIndex]="English")}}},T=i(89);const O=(0,T.Z)(j,[["render",M],["__scopeId","data-v-166249d8"]]);var Z=O,H={name:"speech",components:{Speech:Z},data(){return{fishUID:""}},methods:{update(e){this.fishUID=e}}};const Y=(0,T.Z)(H,[["render",a],["__scopeId","data-v-8345c14e"]]);var A=Y}}]);
//# sourceMappingURL=948.bf500a8f.js.map